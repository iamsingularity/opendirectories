<!DOCTYPE html>

<html>
  <head>
    <title>OpenDL</title>
    <script src="js/jquery-1.11.3.min.js"></script>
    <script src="js/angular.min.js"></script>
    <script src="js/angular-animate.min.js"></script>
    <script src="js/angular-aria.min.js"></script>
    <script src="js/angular-material.min.js"></script>
    <script src="js/angular-material-icons.min.js"></script>
    <script src="js/moment-2.10.3.min.js"></script>
    <script src="js/app.js"></script>     
    

    <link rel="stylesheet" type="text/css" href="css/angular-material.min.css">
    <link rel="stylesheet" type="text/css" href="css/app.css">
  </head>
  <body ng-app="opendl" ng-controller="appController">

    <!-- main panel -->
    <md-content>
      <md-toolbar>
        <div class="md-toolbar-tools">
          <!-- title -->
          <h2>
            OpenDL
            <ng-md-icon ng-if="path" icon="chevron_right" size="14" style="fill: white"></ng-md-icon>
            {{path}}
          </h2>
          <!-- menu icon -->
          <span flex></span>
          <span ng-if="path == 'Downloads'">
            <a ng-href="#" ng-click="get_downloads()">
              <ng-md-icon icon="refresh" style="fill: white"></ng-md-icon>
            </a>
            <a ng-href="#" ng-click="new_download()">
              <ng-md-icon icon="add" style="fill: white"></ng-md-icon>
            </a>
          </span>
          <a ng-href="#" ng-click="show_menu()">
            <ng-md-icon icon="more_vert" style="fill: white"></ng-md-icon>
          </a>
        </div>
      </md-toolbar>
    </md-content>    

    <!-- menu panel -->
    <md-sidenav class="md-sidenav-right md-whiteframe-z2" md-component-id="right">      
      <div ng-controller="menuController" >
        <!-- title -->
        <md-toolbar class="md-theme-light">
          <h1 class="md-toolbar-tools">
            <span ng-if="!blacklist && !query_types"> 
              Menu
            </span>            
          </h1>
        </md-toolbar>

        <!-- menu content -->
        <md-content layout-padding>          
          <div layout="column">
            <div layout="row">
              <md-input-container flex="65">
                <label>Server</label>
                <md-input ng-model="$parent.server"></md-input>          
              </md-input-container>

              <md-input-container flex="35">
                <label>Port</label>
                <md-input ng-model="$parent.port"></md-input>
              </md-input-container>
            </div>
            <div layout="row">
              <md-button ng-click="save()" class="close md-primary" flex="15">Save</md-button>
            </div>
          </div>
          <!-- close menu -->
          <md-button ng-click="close()" class="close md-primary">Close</md-button>
        </md-content>
      </div>
    </md-sidenav>

    <!-- content panel -->
    <md-content class="content" layout="column">
      <md-subheader>
        {{downloads.queued}} Queued - 
        {{downloads.busy}} Busy - 
        {{downloads.done}} Done - 
        {{downloads.error}} Error - 
        {{downloads.total}} Total
      </md-subheader>
      <md-list>
        <md-list-item class="md-3-line" ng-repeat="download in downloads.items" layout="row">
          <ng-md-icon icon="{{status_to_icon(download)}}" title="{{download.status}}" class="pointer status-icon status-{{download.status}}" size="35" flex="10" ng-click="toggle_visible(download)"></ng-md-icon>

          <!--
          <ng-md-icon icon="highlight_remove" size="20" flex="5" ng-if="can_delete(download)" class="pointer top" ng-click="delete_download(download)"></ng-md-icon>
          <span flex="5" ng-if="!can_delete(download)">&nbsp;</span>
          -->

          <div class="md-list-item-text" flex="85">
            <h3 class="url">{{ download.url }}</h3>            
            <p class="times">
              <div ng-if="download.visible">
                <div ng-if="download.started_at">
                  {{ format_date(download.started_at) }}
                  <br ng-if="download.finished_at" />
                  {{ format_date(download.finished_at) }}
                </div>
                <div ng-if="download.error" class="error">
                  <h2>Error</h2>
                  <p>{{download.error}}</p>
                </div>
              </div>
            </p>
          </div>
        </md-list-item>
      </md-list>
      

    </md-content>

  </body>
</html>
