// Generated by CoffeeScript 1.9.3
(function() {
  var app;

  app = angular.module("opendirectories.blacklist.controllers", ["opendirectories.services"]);

  app.controller("blacklistController", [
    "$scope", "$rootScope", "DEFAULT_BLACKLIST", "ListService", function($scope, $rootScope, DEFAULT_BLACKLIST, ListService) {
      $scope.blacklist = DEFAULT_BLACKLIST;
      chrome.storage.sync.get("blacklist", function(data) {
        if (data.blacklist) {
          return $scope.blacklist = JSON.parse(data.blacklist);
        }
      });
      $scope.model = {
        url: null
      };
      $scope.add = function() {
        if ($scope.model.url) {
          $scope.blacklist.push($scope.model.url);
          $scope.model = {
            url: null
          };
          ListService.service.store("blacklist", $scope.blacklist);
          return $rootScope.$broadcast("reload.chrome");
        }
      };
      return $scope.remove = function(item) {
        ListService.service.removeAndStore("blacklist", $scope.blacklist, item);
        return $rootScope.$broadcast("reload.chrome");
      };
    }
  ]);

}).call(this);
