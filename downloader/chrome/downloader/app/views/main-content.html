<md-content class="content" id="content">
  <md-tabs md-selected="selectedIndex" md-border-bottom  md-dynamic-height md-primary>
    <md-tab ng-repeat="tab in tabs">
      <md-tab-label>
        <ng-md-icon icon="{{tab.icon}}" class="tab {{tab.title}}"></ng-md-icon>
        <span class="number">{{downloads[tab.title]}}</span>
      </md-tab-label>
      <md-tab-body>

        <md-list class="md-padding" sv-root sv-part="downloads.items" sv-on-sort="reorderDownloads()">
          <md-list-item ng-repeat="download in downloads.items | filter: {status: tab.title}" sv-element class="md-3-line">
            <div sv-placeholder class="drop">
              Drop download here
            </div>

            <div class="md-avatar" layout="column">
              <span class="drag-handle" sv-handle ng-if="selectedIndex == 0">
                <ng-md-icon icon="drag_handle"></ng-md-icon>
              </span>
              <md-button class="md-icon-button md-primary md-warn" aria-label="Cancel download" title="Cancel download" ng-if="download.canCancel" ng-click="cancelDownload(download)">
                <ng-md-icon icon="cancel">
              </md-button>
              <md-button class="md-icon-button md-primary" aria-label="Queue download" title="Queue download" ng-if="download.canQueue" ng-click="queueDownload(download)">
                <ng-md-icon icon="queue">
              </md-button>
              <md-button class="md-icon-button md-primary md-warn" aria-label="Delete download" title="Delete download" ng-if="download.canDelete" ng-click="deleteDownload(download)">
                <ng-md-icon icon="delete">
              </md-button>
            </div>

            <div class="md-list-item-text">
              <h3 ng-class="{pointer: selectedIndex != 0}" ng-click="download.visible = !download.visible">{{download.url}}</h3>
              <h4>Added by {{download.user.email}} on {{download.created_at | date: "EEEE, dd MMMM, hh:mma"}}</h4>
              <p>
                <div ng-if="download.visible && download.started_at">
                  Started at: {{ download.started_at | date : "EEEE, dd MMMM, hh:mma"}}
                </div>
                <div ng-if="download.visible && download.finished_at">
                  Finished at: {{ download.finished_at | date : "EEEE, dd MMMM, hh:mma"}}
                </div>
                <div ng-if="download.visible && download.error" class="error">
                  <h2>Error</h2>
                  <p>{{download.error}}</p>
                </div>              
              </p>
            </div>
          </md-list-item>
        </md-list>

      </md-tab-body>
    </md-tab>
  </md-tabs>
</md-content>